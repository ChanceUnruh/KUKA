# KUKA KRL Logic Guide

## COMMENTS
```krl
;YOU CAN ADD A COMMENT TO YOUR CODE WITH A SEMICOLON LIKE THIS
```
## SUBROUTINES
```krl
RUN MY_PROGRAM() ;CALLS AN EXTERNAL PROGRAM NAMED MY_PROGRAM
```
## OUTPUTS
```krl
$OUT [14] = FALSE ;SETS THE VALUE OF OUTPUT 14 TO FALSE
```

## WAIT
```krl
WAIT SEC 5 ;THE PROGRAM WAITS 5 SECONDS BEFORE CONTINUING 
```

## FOR LOOP
```krl
FOR i = 1 TO 6 ;SET i TO THE NUMBER OF TIMES YOU WANT THE FOR LOOP TO ITERATE
  $IN [1] = TRUE
  WAIT SEC 3
  $IN [1] = FALSE
ENDFOR
```

## FOR LOOP WITH STEP

```krl
DECL INT X ;DECLARE THE VARIABLE X AS AN INTEGER
X = 0 ;SET THE INITIAL VALUE OF X TO 0

FOR i = 1 TO 6 STEP 2 ;STEP 2 INCREMENTS THE FOR LOOP BY 2 EACH TIME (i = 1, 3, 5)
    ; INCREMENT X BY i ON EACH LOOP ITERATION
    X = i + X ;ADD THE CURRENT VALUE OF i TO X (X = i + X)
ENDFOR

; OUTPUT:
; First iteration (i = 1): X = 1
; Second iteration (i = 3): X = 4
; Third iteration (i = 5): X = 9
```
```krl
DECL INT X ;DECLARE THE VARIABLE X AS AN INTEGER
X = 0 ;SET THE INITIAL VALUE OF X TO 0

FOR i = 6 TO 1 STEP -2 ;STEP -2 DECREMENTS THE FOR LOOP BY 2 EACH TIME (i = 6, 4, 2)
    ; INCREMENT X BY i ON EACH LOOP ITERATION
    X = i + X ;ADD THE CURRENT VALUE OF i TO X (X = i + X)
ENDFOR

; OUTPUT:
; First iteration (i = 6): X = 6
; Second iteration (i = 4): X = 10
; Third iteration (i = 2): X = 12
```
## WHILE LOOP
```krl
WHILE $IN [12] = TRUE ;WHILE INPUT 12 IS TRUE INPUT 29 IS ALSO SET TO TRUE
  $OUT [29] = TRUE
ENDWHILE
```

## REPEAT
```krl
R = 1
REPEAT
  R = R + 1
UNTIL $IN [1] == TRUE
```

## LOOP
```krl
LOOP ;START LOOP

   PTP POS_1 ;MOVE ROBOT TO POSITION POS_1 USING POINT-TO-POINT MOTION

   PTP POS_2 ;MOVE ROBOT TO POSITION POS_2 USING POINT-TO-POINT MOTION

   IF $IN[1] == TRUE THEN ;CHECK IF DIGITAL INPUT 1 IS TRUE
      EXIT ;EXIT THE LOOP IF INPUT IS ACTIVE
   ENDIF 

   CIRC HELP_1, POS_3 ;PERFORM A CIRCULAR MOVE THROUGH HELP_1 TO POS_3

   PTP POS_4 ;MOVE ROBOT TO POSITION POS_4 USING POINT-TO-POINT MOTION

ENDLOOP ;END OF LOOP, WILL REPEAT UNLESS EXIT IS TRIGGERED
```
## IF THEN
```krl
A = 11
IF A > 10 THEN ;IF A IS LESS THAN OUTPUT 641 IS SET TO TRUE
  OUT [641] = TRUE
ELSE ;IF A IS ANYTHING GREATER THAN 10 OUTPUT 641 IS SET TO FALSE
  OUT OUT[641] = FALSE
ENDIF
```
```krl
A = 11
IF A == 10 THEN ;IF A IS EQUAL TO 10 THEN OUTPUT 641 IS SET TO TRUE
  OUT [641] = TRUE
ENDIF
```
## SWITCH CASE
```KRL
DEF switch_example ( )
   DECL INT my_job ;DECLARE A NUMBER VARIABLE CALLED my_job

   my_job = 2 ;SET my_job TO 2 FOR THIS EXAMPLE

   SWITCH my_job ;CHECK WHAT VALUE my_job HAS

   CASE 1 ;IF my_job IS 1
      $OUT[1] = TRUE ;TURN ON OUTPUT 1

   CASE 2 ;IF my_job IS 2
      $OUT[2] = TRUE ;TURN ON OUTPUT 2

   CASE 3 ;IF my_job IS 3
      $OUT[3] = TRUE ;TURN ON OUTPUT 3

   DEFAULT ;IF my_job IS NONE OF THE ABOVE
      $OUT[4] = TRUE ;TURN ON OUTPUT 4 TO SHOW INVALID JOB

   ENDSWITCH ;END THE SWITCH CHECK

END ;END OF PROGRAM

```
## HALT
```krl
$OUT [649] = FALSE

HALT ;EXECUTION OF THE PROGRAM CAN ONLY BE RESUMED USING THE START KEY

PTP XP1
```

## WAIT FOR
```krl
WAIT FOR $IN[17] == 17 ;INTERRUPTS THE PROGRAM UNTIL INPUT 17 IS TRUE
```
```krl
WAIT FOR NOT (my_var == 7) ;INTERRUPTS PROGRAM UNTIL my_var TO NOT BE EQUAL TO 7
```
```krl
WAIT FOR <> my_var == 7 ;INTERRUPTS PROGRAM UNTIL my_var TO NOT BE EQUAL TO 7
```
## INTERRUPT
```krl
DEF safety_zone_example( )

   INTERRUPT DECL 10 WHEN $IN[1]==TRUE DO pause_robot()
   INTERRUPT ON 10 ;ENABLE SAFETY INTERRUPT

   PTP HOME

   LOOP
      PTP POS_1
      PTP POS_2
   ENDLOOP

END
```
```krl
DEF pause_robot()
   WHILE $IN[1] == TRUE
      WAIT SEC 0.1 ;WAIT WHILE SOMEONE IS IN THE ZONE
   ENDWHILE
   RESUME ;ONCE CLEAR, CONTINUE MAIN PROGRAM
END
```

